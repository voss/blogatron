// ----------------------------------------------------------------------------
// markItUp! Universal MarkUp Engine, JQuery plugin
// v 1.0.1 beta
// Dual licensed under the MIT and GPL licenses.
// ----------------------------------------------------------------------------
// Copyright (C) 2007 Jay Salvat
// http://markitup.jaysalvat.com/
// ----------------------------------------------------------------------------
eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('(3($){$.3e.Z=3(u,v){4 w={2t:"",2m:G,23:G,29:"",1S:"2I-8",2w:"",2r:"",2p:"",1y:"",2e:"2c",1t:"",1q:"",1r:{},1u:{},1v:{},1l:{},2x:[{}]};$.S(w,u,v);4 z=E;4 A=E;4 B=E;D T.1C(3(){4 f=$(T);4 g=T;4 k=[];4 l=E;4 m=0;4 o=0;4 p=-1;4 q,N;4 r,1b;4 s;2d();3 2d(){f.1n(\'<1W L="\'+w.2t+\'"></1W>\');f.1n(\'<K 1d="\'+(f.1Q("1d")||"")+\'" L="Z"></K>\');f.1n(\'<K L="2J"></K>\');f.1Q("1d","").1O("2H");r=$(\'<K L="2G"></K>\').2E(f);$(1J(w.2x)).1I(r);2y=$(\'<K L="3K"></K>\').1F(f).1g("3I",3(e){4 h=f.2s();4 y=e.2u;4 a=3(e){f.1A("2s",3D.3z(20,e.2u+h-y)+"3w")};4 b=3(e){$("J").2i("2g",a).2i("2f",b)};$("J").1g("2g",a).1g("2f",b)});1b=$(\'<K L="3t"></K>\').1F(f);1b.2b(2y);f.2a(1m).3o(1m);f.1g("1p",3(e,a){2(a.1a!=E){14()}2(g==$.Z.22){V(a)}});f.18(3(){$.Z.22=T})}3 1J(c){4 d=$("<12></12>"),i=0;$("P:1Y > 12",d).1A("30","F");$(c).1C(3(){4 a=T,t="";4 b=(a.1w)?" [2T+"+a.1w+"]":"";2(a.1U){P=$(\'<P L="2R">\'+(a.1U||"")+\'</P>\').1I(d)}7{i++;1R(n=k.5,j=n-1;j>=0;j--){t+=k[j]+"-"}P=$(\'<P L="\'+(a.2L||"")+\' 2B 2B\'+t+(i)+\'"><a 1H="#" 1N="\'+(a.1w||"")+\'" 1j="\'+(a.1M+b||"")+\'">\'+(a.1M||"")+\'</a></P>\').25(3(e){2(a.1L){2F(a.1L)()}V(a);D E}).1Y(3(){$("> 12",T).1K()},3(){$("> 12",T).2D()}).1I(d);2(a.2A){k.3P(i);$(P).1O("3O").2b(1J(a.2A))}}});k.3N();D d}3 2z(c){2(c){c=c.3L();c=c.1h(/\\(\\!\\((.*?)\\)\\!\\)/1G,3(x,a){b=a.1E("|!|");2(B==G){D(b[1]!=2v)?b[1]:b[0]}7{D(b[1]==2v)?"":b[0]}});c=c.1h(/\\[\\!\\[(.*?)\\]\\!\\]/1G,3(a){b=a.1h(/(\\[\\!\\[|\\]\\!\\])/1G,"").1E(":!:");D 3J(b[0],(b[1])?b[1]:"")||""});D c}D""}3 I(a){2($.3H(a))a=a(N);D 2z(a)}3 15(a){H=I(q.H);U=I(q.U);W=I(q.W);O=I(q.O);2(W!=""){F=H+W+O}7 2(6==""&&U!=""){F=H+U+O}7{F=H+(a||6)+O}D{F:F,H:H,W:W,U:U,O:O}}3 V(a){N=q=a;14();$.S(N,{1f:"",1B:g,6:(6||""),U:a.U,2q:o});I(w.1t);I(q.1t);2(z==G&&A==G){I(q.3G)}$.S(N,{1f:1});2(z==G&&A==G){R=6.1E((($.1e.3F)?"\\n":"\\r\\n"));1R(j=0,n=R.5,i=0;i<n;i++){2($.3E(R[i])!=""){$.S(N,{1f:++j,6:R[i]});R[i]=15(R[i]).F}7{R[i]=""}}C={F:R.3C("\\n")};Y=o;X=C.F.5+(($.1e.2l)?n:0)}7 2(z==G){C=15(6);Y=o+C.H.5;X=C.F.5-C.H.5-C.O.5}7 2(A==G){C=15(6);Y=o;X=C.F.5}7{C=15(6);Y=o+C.F.5;X=0}2((6==""&&C.W=="")){2($.1e.2l){o+=(C.F.5-C.F.1h(/^\\n*/g,"").5)}Y=o+C.H.5;X=C.F.5-C.H.5-C.O.5;p=f.M().16(o,f.M().5).5}$.S(N,{2q:o});2k(C.F);1x(Y,X);14();$.S(N,{1f:"",6:6});2(z==G&&A==G){I(q.3v)}I(q.1q);I(w.1q);2(l&&s&&w.23)2j()}3 2k(a){2(Q.6){2h=Q.6.1s();2h.19=a}7{f.M(f.M().16(0,o)+a+f.M().16(o+6.5,f.M().5))}}3 1x(a,b){2(g.1P){11=g.1P();11.3u(G);11.1T("1k",a);11.3s("1k",b);11.3r()}7 2(g.1X){g.1X(a,a+b)}g.1V=m;g.18()}3 14(){g.18();m=g.1V;2(Q.6){6=Q.6.1s().19;2($.1e.3q){4 a=Q.6.1s();4 b=a.3p();b.3n(g);o=-1;3l(b.3k(a)){b.1T("1k");o++}}7{o=g.27}}7{o=g.27;6=f.M().16(o,g.3j)}D 6}3 26(){2(!l){2(w.2m==G){l=$(\'<24 L="3h"></24>\').1F(1b).1K();s=l[l.5-1].3g||3f[l.5-1]}7{s=3d.21("","26","3c=1Z, 3b=1Z")}}7{2(B&&l){l.3a();l=E;s=E}}}3 2j(){2(w.1y!=""){$.39({1i:"38",37:E,36:w.1y,2c:w.2e+"="+3i(f.M()),35:3(a){J=a},34:3(){33("Z! 3m: 32 31 2Z.")}})}7{J=\'<J>\\n<28>\\n<2Y 2X-2W="2n-1i" 2n="19/J; 2V=\'+w.1S+\'">\\n\';J+=\'<1j></1j>\\n<2U 1H="\'+w.29+\'" />\\n<3x 1H="\'+w.2w+\'" 3y="2S" 1i="19/1A">\\n</28>\\n\';J+=\'<2C 1d="\'+w.2r+\'" L="\'+w.2p+\'">\\n\'+f.M()+\'\\n</2C>\\n\';J+=\'</J>\'}s.Q.21();s.Q.3A(J);3B(3(){s.Q.2Q()},2P);2(l==E)s.18()}3 1m(e){A=e.2o;B=e.1z;z=(!(e.1z&&e.1o))?e.1o:E;$.S(N,{1o:z,2o:A,1z:B});2(e.1i=="2a"){2(z){a=$("a[1N="+2O.2N(e.17)+"]",r);2(a.5!=0){z=E;a.2M("P").1D("25");e.2K();e.3M();D E}}2(e.17==13||e.17==10){2(z==G){z=E;V(w.1v);D w.1v.1c}7 2(A==G){A=E;V(w.1u);D w.1u.1c}7{V(w.1r);D w.1r.1c}}2(e.17==9){2(p!=-1){14();p=f.M().5-p;1x(p,0);p=-1;D E}7{V(w.1l);p=-1;D w.1l.1c}}}}})};$.Z=3(a){4 b={1a:E};$.S(b,a);2(b.1a){D $(b.1a).1C(3(){$("1B",T).1D("1p",[b])})}7{$("1B").1D("1p",[b])}}})(3Q);',62,239,'||if|function|var|length|selection|else|||||||||||||||||||||||||||||||string|return|false|block|true|openWith|prepare|html|div|class|val|hash|closeWith|li|document|lines|extend|this|placeHolder|markup|replaceWith|len|start|markItUp||range|ul||get|build|substring|keyCode|focus|text|target|footer|keepDefault|id|browser|line|bind|replace|type|title|character|onTab|keyPressed|wrap|ctrlKey|insertion|afterInsert|onEnter|createRange|beforeInsert|onShiftEnter|onCtrlEnter|key|set|previewParserPath|altKey|css|textarea|each|trigger|split|insertAfter|gm|href|appendTo|dropMenus|show|call|name|accesskey|addClass|createTextRange|attr|for|previewCharset|moveStart|separator|scrollTop|span|setSelectionRange|hover|yes||open|focused|previewIFrameRefresh|iframe|click|preview|selectionStart|head|previewBaseUrl|keydown|append|data|init|previewParserVar|mouseup|mousemove|newSelection|unbind|refreshPeview|insert|opera|previewIFrame|content|shiftKey|previewBodyClassName|caretPosition|previewBodyId|height|nameSpace|clientY|undefined|previewCssPath|markupSet|resizeHandle|magicMarkups|dropMenu|markItUpButton|body|hide|insertBefore|eval|markItUpHeader|markItUpEditor|utf|markItUpContainer|preventDefault|className|parent|fromCharCode|String|100|close|markItUpSeparator|stylesheet|Ctrl|base|charset|equiv|http|meta|found|display|not|Parser|alert|error|success|url|async|POST|ajax|remove|scrollbars|resizable|window|fn|frame|contentWindow|markItUpPreviewFrame|escape|selectionEnd|inRange|while|Error|moveToElementText|keyup|duplicate|msie|select|moveEnd|markItUpFooter|collapse|afterMultiInsert|px|link|rel|max|write|setTimeout|join|Math|trim|mozilla|beforeMultiInsert|isFunction|mousedown|prompt|markItUpResizeHandle|toString|stopPropagation|pop|markItUpDropMenu|push|jQuery'.split('|'),0,{}))